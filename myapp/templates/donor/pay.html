{% extends "base.html" %}
{% load static %}

{% block title %}Confirm Payment | ComradeGigs{% endblock %}

{% block content %}
                  <!-- payment form -->
<section class="py-5 bg-light" style="min-height: 80vh; display: flex; align-items: center;">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-5 col-md-7">

        <div class="card border-0 shadow-lg rounded-5 overflow-hidden text-center">
          
          <div class="bg-success bg-gradient p-2 text-white fw-bold small">
            <i class="bi bi-broadcast me-2"></i>Request Sent to Safaricom
          </div>

          <div class="card-body p-5">
            
            <div class="mb-4 d-flex justify-content-center">
              <div class="pulse-container">
                <div class="d-inline-flex align-items-center justify-content-center bg-success text-white rounded-circle shadow-lg" style="width: 80px; height: 80px; position: relative; z-index: 2;">
                  <i class="bi bi-phone-vibrate fs-1"></i>
                </div>
                <div class="pulse-ring"></div>
              </div>
            </div>

            <h2 class="fw-bold text-dark mb-3">Check Your Phone</h2>
            <p class="text-secondary mb-4">
              We've sent an M-Pesa prompt to <strong>{{ phone_number }}</strong>. <br>
              Please enter your PIN to complete the donation.
            </p>

            <div class="bg-light rounded-4 p-3 mb-4 border border-light text-start">
              <div class="d-flex justify-content-between mb-2">
                <span class="text-muted small">Amount:</span>
                <span class="fw-bold text-dark">Ksh {{ donation.amount }}</span>
              </div>
              <div class="d-flex justify-content-between">
                <span class="text-muted small">Reference:</span>
                <span class="fw-bold text-dark small">{{ donation.mpesa_code|default:"Processing..." }}</span>
              </div>
            </div>

            <div class="d-grid gap-2">
              <a href="{% url 'myapp:donate_success' %}" class="btn btn-outline-success rounded-pill fw-bold py-2">
                I've Entered My PIN
              </a>
            </div>

            <div class="mt-4">
              <small class="text-muted d-block mb-1">Didn't get the prompt?</small>
              <a href="{% url 'myapp:donate' %}" class="text-decoration-none fw-bold small text-danger">
                <i class="bi bi-arrow-repeat me-1"></i>Try Again
              </a>
            </div>

          </div>
        </div>

      </div>
    </div>
  </div>
</section>
      <!-- css styling  of the green circle continuously growing outward and fading away-->
<style>
  .pulse-container { position: relative; width: 80px; height: 80px; }
  .pulse-ring {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    border-radius: 50%; background-color: rgba(25, 135, 84, 0.6);
    z-index: 1; animation: pulse-animation 2s infinite;
  }
  @keyframes pulse-animation {
    0% { transform: scale(1); opacity: 0.8; }
    100% { transform: scale(2); opacity: 0; }
  }
</style>
{% endblock %}