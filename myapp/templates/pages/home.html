{% extends "base.html" %}
{% load static %}

{% block title %}Home | ComradeGigs{% endblock %}

{% block content %}

<header class="py-5 bg-light bg-gradient rounded-bottom-5 shadow-sm mb-5 hero-section position-relative overflow-hidden">
    <div class="position-absolute top-0 end-0 translate-middle-y bg-warning bg-opacity-10 rounded-circle" style="width: 600px; height: 600px; z-index: 0;"></div>

    <div class="container py-lg-5 position-relative" style="z-index: 1;">
        <div class="row align-items-center gy-4">

            <div class="col-lg-7 col-md-6 order-2 order-md-1 text-center text-md-start">
                
                {% if user.is_authenticated %}
                    <span class="badge bg-primary bg-opacity-10 text-primary mb-3 px-3 py-2 rounded-pill fw-bold border border-primary border-opacity-25">
                        <i class="bi bi-person-check-fill me-2"></i>Welcome back, {{ user.first_name|default:user.username|title }}!
                    </span>
                {% else %}
                    <span class="badge bg-warning bg-opacity-10 text-dark mb-3 px-3 py-2 rounded-pill fw-bold border border-warning border-opacity-25">
                        <i class="bi bi-stars me-2"></i>The #1 Platform for Kenyan Comrades
                    </span>
                {% endif %}

                <h1 class="fw-bolder display-4 text-dark mb-4 lh-tight">
                    Empowering Comrades Through <span class="text-primary">Skills</span>, <span class="text-success">Gigs</span> & <span class="text-danger">Support</span>
                </h1>
                
                <p class="lead fs-5 text-secondary mb-5 w-lg-75">
                    ComradeGigs is a safe digital space where university students learn high-value skills, get verified, and earn money to avoid <em>kuinama</em>.
                </p>

                <div class="d-flex flex-wrap gap-3 justify-content-center justify-content-md-start">
                    
                    {% if user.is_authenticated %}
                        
                        {% if user.role == 'student' %}
                            {% if user.student_profile.is_skill_verified and user.student_profile.is_id_verified %}
                                <a href="{% url 'myapp:job_list' %}" class="btn btn-primary btn-lg rounded-pill fw-bold px-5 shadow-sm hover-lift">
                                    <i class="bi bi-briefcase-fill me-2"></i>Find Work
                                </a>
                            {% else %}
                                <a href="{% url 'myapp:learn_skills' %}" class="btn btn-warning text-dark btn-lg rounded-pill fw-bold px-5 shadow-sm hover-lift">
                                    <i class="bi bi-patch-check-fill me-2"></i>Get Verified
                                </a>
                            {% endif %}
                            <a href="{% url 'myapp:student_dashboard' %}" class="btn btn-outline-dark btn-lg rounded-pill fw-bold px-4 hover-lift">
                                Dashboard
                            </a>

                        {% elif user.role == 'client' %}
                            <a href="{% url 'myapp:job_create' %}" class="btn btn-primary btn-lg rounded-pill fw-bold px-5 shadow-sm hover-lift">
                                <i class="bi bi-plus-lg me-2"></i>Post a Gig
                            </a>
                            <a href="{% url 'myapp:client_dashboard' %}" class="btn btn-outline-primary btn-lg rounded-pill fw-bold px-4 hover-lift">
                                Manage Jobs
                            </a>

                        {% elif user.role == 'donor' %}
                            <a href="{% url 'myapp:donate' %}" class="btn btn-danger btn-lg rounded-pill fw-bold px-5 shadow-sm hover-lift">
                                <i class="bi bi-heart-fill me-2"></i>Donate Now
                            </a>
                            <a href="{% url 'myapp:donor_dashboard' %}" class="btn btn-outline-danger btn-lg rounded-pill fw-bold px-4 hover-lift">
                                My Impact
                            </a>

                        {% elif user.is_superuser %}
                             <a href="{% url 'myapp:admin_dashboard' %}" class="btn btn-dark btn-lg rounded-pill fw-bold px-5 shadow-sm hover-lift">
                                <i class="bi bi-shield-lock-fill me-2"></i>Admin Panel
                            </a>
                        {% endif %}

                    {% else %}
                        
                        <a href="{% url 'myapp:register_landing' %}" class="btn btn-primary btn-lg rounded-pill fw-bold px-5 shadow-sm hover-lift">
                            <i class="bi bi-rocket-takeoff-fill me-2"></i>Join the Alliance
                        </a>
                        <a href="{% url 'myapp:events' %}" class="btn btn-outline-dark btn-lg rounded-pill fw-bold px-4 hover-lift">
                            <i class="bi bi-calendar-event me-2"></i>Upcoming Events
                        </a>

                    {% endif %}

                </div>
            </div>

            <div class="col-lg-5 col-md-6 order-1 order-md-2 mb-4 mb-md-0">
                <div class="position-relative">
                    <img src="{% static 'images/teamsucces.jpg' %}" alt="Students Hustling" class="img-fluid rounded-4 shadow-lg border border-4 border-white position-relative" style="z-index: 2;">
                    <div class="position-absolute bottom-0 start-0 translate-middle-x mb-4 ms-4 bg-white p-3 rounded-4 shadow-sm d-flex align-items-center gap-3" style="z-index: 3;">
                        <div class="bg-success text-white rounded-circle p-2"><i class="bi bi-cash-stack fs-4"></i></div>
                        <div>
                            <h6 class="fw-bold mb-0">Paid Instantly</h6>
                            <small class="text-muted">Via M-Pesa</small>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</header>

<section class="py-4 border-bottom mb-5">
    <div class="container">
        <p class="text-center small text-uppercase text-muted fw-bold letter-spacing-2 mb-4">Trusted By Comrades From</p>
        <div class="d-flex flex-wrap justify-content-center gap-4 gap-md-5 opacity-50 grayscale-hover">
            <h5 class="fw-bold text-secondary">UoN</h5>
            <h5 class="fw-bold text-secondary">KU</h5>
            <h5 class="fw-bold text-secondary">JKUAT</h5>
            <h5 class="fw-bold text-secondary">STRATHMORE</h5>
            <h5 class="fw-bold text-secondary">MKU</h5>
        </div>
    </div>
</section>

<section class="py-5 mb-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 text-center">
                <h5 class="text-warning fw-bold text-uppercase letter-spacing-2 mb-3">Our Mission</h5>
                <h2 class="fw-bolder mb-4 display-6">More Than Just a Gig Site</h2>
                <p class="lead text-secondary fs-5">
                    We believe financial struggles shouldn't stop education. We connect talented students with clients who need work done, 
                    creating a <span class="text-dark fw-bold">secure ecosystem</span> where skills pay bills and comrades support comrades.
                </p>
            </div>
        </div>
    </div>
</section>

<section class="py-5 bg-light rounded-5 mx-3 shadow-sm mb-5">
    <div class="container py-4">
        <div class="text-center mb-5">
            <h2 class="fw-bolder display-6">How It Works</h2>
            <p class="text-muted">Three simple steps to start winning.</p>
        </div>
        
        <div class="row g-4 text-center">
            <div class="col-md-4">
                <div class="position-relative">
                    <div class="bg-white shadow-sm rounded-circle d-inline-flex align-items-center justify-content-center mb-4" style="width: 100px; height: 100px;">
                        <span class="fw-bold fs-3 text-primary">1</span>
                    </div>
                    <h4 class="fw-bold">Join & Verify</h4>
                    <p class="text-muted px-4">Create an account. Students must upload their School ID and pass a quick skill test to get the <span class="badge bg-success bg-opacity-10 text-success">Verified Badge</span>.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="position-relative">
                    <div class="bg-white shadow-sm rounded-circle d-inline-flex align-items-center justify-content-center mb-4" style="width: 100px; height: 100px;">
                        <span class="fw-bold fs-3 text-warning">2</span>
                    </div>
                    <h4 class="fw-bold">Work & Post</h4>
                    <p class="text-muted px-4">Clients post gigs. Verified students browse, apply, and get hired instantly. No spam, just real work.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="position-relative">
                    <div class="bg-white shadow-sm rounded-circle d-inline-flex align-items-center justify-content-center mb-4" style="width: 100px; height: 100px;">
                        <span class="fw-bold fs-3 text-success">3</span>
                    </div>
                    <h4 class="fw-bold">Get Paid</h4>
                    <p class="text-muted px-4">Once the job is done, payment is released directly to the student via M-Pesa. Secure, fast, and transparent.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-5 mb-5">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h6 class="text-primary fw-bold text-uppercase small mb-1">Community</h6>
                <h2 class="fw-bolder mb-0 display-6">Upcoming Events</h2>
            </div>
            <a href="{% url 'myapp:events' %}" class="btn btn-outline-primary rounded-pill btn-sm fw-bold">View Calendar <i class="bi bi-arrow-right"></i></a>
        </div>

        <div class="row g-4">
            <div class="col-md-6">
                <div class="card border-0 shadow-sm rounded-4 overflow-hidden h-100 hover-lift bg-primary text-white">
                    <div class="card-body p-5 d-flex flex-column justify-content-center align-items-start">
                        <span class="badge bg-white text-primary mb-3">Featured</span>
                        <h3 class="fw-bold mb-3">Freelancing Bootcamp 2025</h3>
                        <p class="opacity-75 mb-4">Master the art of writing winning proposals and managing clients professionally.</p>
                        <div class="d-flex align-items-center gap-3">
                            <div class="bg-white bg-opacity-25 rounded px-3 py-1">
                                <i class="bi bi-calendar-event me-2"></i>Dec 16
                            </div>
                            <div class="bg-white bg-opacity-25 rounded px-3 py-1">
                                <i class="bi bi-geo-alt-fill me-2"></i>Google Meet
                            </div>
                            <div class="bg-white bg-opacity-25 rounded px-3 py-1">
                                <i class="bi bi-geo-alt-fill me-2"></i>View Recording
                                <a href="https://www.awesomescreenshot.com/video/47229711?key=c1c368508522a425167d12fd23b83857" target="_blank">CV/RESUME WRITING</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card border-0 shadow-sm rounded-4 overflow-hidden h-100 hover-lift bg-success text-white">
                    <div class="card-body p-5 d-flex flex-column justify-content-center align-items-start">
                        <span class="badge bg-white text-primary mb-3">Featured</span>
                        <h3 class="fw-bold mb-3">VA MASTERCLASS 2025</h3>
                        <p class="opacity-75 mb-4">Master the Tricks to excel in VA sector.</p>
                        <div class="d-flex align-items-center gap-3">
                            <div class="bg-white bg-opacity-25 rounded px-3 py-1">
                                <i class="bi bi-calendar-event me-2"></i>Dec 07
                            </div>
                            <div class="bg-white bg-opacity-25 rounded px-3 py-1">
                                <i class="bi bi-geo-alt-fill me-2"></i>Zoom Meet
                            </div>
                            <div class="bg-white bg-opacity-25 rounded px-3 py-1">
                                <i class="bi bi-geo-alt-fill me-2"></i>View Recording
                                <a href="https://www.awesomescreenshot.com/video/46773881?key=37414dd9bf922cba2273a16c7020803a" target="_blank">VA MASTERCLASS</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card border-0 shadow-sm rounded-4 overflow-hidden h-100 hover-lift">
                    <div class="row g-0 h-100">
                        <div class="col-4 bg-dark text-white d-flex flex-column align-items-center justify-content-center p-3 text-center">
                            <span class="display-5 fw-bold">22</span>
                            <span class="text-uppercase small fw-bold text-warning">Dec</span>
                        </div>
                        <div class="col-8">
                            <div class="card-body d-flex flex-column h-100 justify-content-center">
                                <span class="badge bg-light text-dark w-auto align-self-start mb-2 border">Charity</span>
                                <h5 class="fw-bold mb-1">Giving Back Saturday</h5>
                                <p class="text-muted small mb-2">Visiting <em>Baraka Children's Home</em> with food & mentorship.</p>
                                <a href="{% url 'myapp:events' %}" class="text-dark fw-bold text-decoration-none small stretched-link">Join the Team &rarr;</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-5 bg-light rounded-5 mx-3 shadow-sm mb-5">
    <div class="container py-4">
        <div class="row justify-content-center mb-5">
            <div class="col-lg-8 text-center">
                <h6 class="text-warning fw-bold text-uppercase letter-spacing-2 mb-2">
                    <i class="bi bi-chat-quote-fill me-2"></i>Wall of Love
                </h6>
                <h2 class="display-6 fw-bolder text-dark mb-3">Comrades Winning Against Kuinama</h2>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card border-0 shadow-sm rounded-4 h-100 p-4 hover-lift">
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3 fs-5 fw-bold" style="width: 50px; height: 50px;">BK</div>
                        <div><h6 class="fw-bold mb-0 text-dark">Brian K.</h6><small class="text-muted">JKUAT, Year 3</small></div>
                    </div>
                    <p class="text-dark opacity-75 fst-italic small">"I was about to miss my exams because of a 5k fee balance. I picked up a Data Entry gig on Tuesday and cleared my balance by Friday!"</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card border-0 shadow-sm rounded-4 h-100 p-4 hover-lift bg-dark text-white">
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-warning text-dark rounded-circle d-flex align-items-center justify-content-center me-3 fs-5 fw-bold" style="width: 50px; height: 50px;">SW</div>
                        <div><h6 class="fw-bold mb-0">Stacy W.</h6><small class="text-white-50">UoN, Year 2</small></div>
                    </div>
                    <p class="opacity-75 fst-italic small">"I took the free Graphic Design mini-course, got my badge, and now I design posters for campus events. I haven't asked my parents for pocket money in 3 months."</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card border-0 shadow-sm rounded-4 h-100 p-4 hover-lift">
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-success text-white rounded-circle d-flex align-items-center justify-content-center me-3 fs-5 fw-bold" style="width: 50px; height: 50px;">KO</div>
                        <div><h6 class="fw-bold mb-0 text-dark">Kevin O.</h6><small class="text-muted">KU, Year 4</small></div>
                    </div>
                    <p class="text-dark opacity-75 fst-italic small">"When HELB delayed, I used the Donation feature to request support for food. A verified alumni sent me Ksh 1,000 for shopping. It kept me going."</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-5">
    <div class="container text-center">
        {% if user.is_authenticated %}
            {% if user.role == 'student' %}
                <h2 class="fw-bold mb-3">Ready to Earn?</h2>
                <a href="{% url 'myapp:job_list' %}" class="btn btn-warning btn-lg rounded-pill px-5 fw-bold shadow-sm">Start Applying</a>
            {% elif user.role == 'client' %}
                <h2 class="fw-bold mb-3">Have a Task?</h2>
                <a href="{% url 'myapp:job_create' %}" class="btn btn-warning btn-lg rounded-pill px-5 fw-bold shadow-sm">Post a Gig Now</a>
            {% endif %}
        {% else %}
            <h2 class="fw-bold mb-3">Ready to Join the Alliance?</h2>
            <p class="text-muted mb-4">Join 1,000+ students and clients building the future.</p>
            <a href="{% url 'myapp:register_landing' %}" class="btn btn-primary btn-lg rounded-pill px-5 fw-bold shadow-sm hover-lift">Get Started Now</a>
        {% endif %}
    </div>
</section>

{% endblock %}